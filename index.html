<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="randomhost/weather : Encapsulates functions for easy retrieval of weather data from the Yahoo Weather API.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/custom.css">

    <title>randomhost/weather</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/randomhost/weather">View on GitHub</a>

          <img id="project_logo" src="images/phpweather.png">

          <h1 id="project_title">randomhost/weather</h1>
          <h2 id="project_tagline">Encapsulates functions for easy retrieval of weather data from the Yahoo Weather API.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/randomhost/weather/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/randomhost/weather/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><a href="https://travis-ci.org/randomhost/weather"><img src="https://travis-ci.org/randomhost/weather.svg?branch=master" alt="Build Status"></a></p>

<h1>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h1>

<p>This package encapsulates functions for easy retrieval of weather data from the
<a href="http://developer.yahoo.com/weather/">Yahoo Weather API</a>. It was created as part of <code>randomhost/webcamoverlay</code>
but is released as a separate component so it can be used in other packages.</p>

<p>Because it was created as a dependency of <code>randomhost/webcamoverlay</code>, it does
only support a subset of the available weather data.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>A basic approach at using this package could look like this:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">namespace</span> <span class="pl-en">randomhost\Weather</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">require_once</span> <span class="pl-s"><span class="pl-pds">'</span>/path/to/vendor/autoload.php<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// get Yahoo Weather API Feed instance</span></span>
<span class="pl-s1"><span class="pl-smi">$feed</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Yahoo\</span><span class="pl-c1">Feed</span>(<span class="pl-s"><span class="pl-pds">'</span>Cologne<span class="pl-pds">'</span></span>, <span class="pl-c1">Yahoo\</span><span class="pl-c1">Feed</span><span class="pl-k">::</span><span class="pl-c1">UNITS_INTL</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-c1">sprintf</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>Temperature: %sÂ°%s, Humidity: %s%%<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-smi">$feed</span><span class="pl-k">-&gt;</span>getCondition()<span class="pl-k">-&gt;</span>getTemperature(),</span>
<span class="pl-s1">    <span class="pl-smi">$feed</span><span class="pl-k">-&gt;</span>getUnits()<span class="pl-k">-&gt;</span>getTemperature(),</span>
<span class="pl-s1">    <span class="pl-smi">$feed</span><span class="pl-k">-&gt;</span>getAtmosphere()<span class="pl-k">-&gt;</span>getHumidity()</span>
<span class="pl-s1">);</span></pre></div>

<p>This will instantiate the class, fetch the weather data and display current
temperature and humidity.</p>

<p>Assuming that you named this file <code>weather.php</code>, you should now be able to
access the weather data at <code>http://example.com/weather.php</code></p>

<p>A more detailed example can be found in <code>src/www/weather/index.php</code>.</p>

<h3>
<a id="the-feed-object" class="anchor" href="#the-feed-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Feed object</h3>

<p>The <code>Feed</code> object is the primary object you will interact with in your application.
It provides all methods required for retrieving data from the Yahoo! Weather API.</p>

<h4>
<a id="constructor" class="anchor" href="#constructor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Constructor</h4>

<p>The constructor takes 3 parameters which are all optional:</p>

<ul>
<li><p><code>$locationName</code><br>
Location name for retrieving weather data from the Yahoo Weather API.</p></li>
<li><p><code>$systemOfUnits</code><br>
System of units to be returned by the feed. This must be either <code>Feed::UNITS_INTL</code>
or <code>Feed::UNITS_US</code>.</p></li>
<li><p><code>$feedUrl</code><br>
Feed URL for retrieving weather data from Yahoo Weather API.</p></li>
</ul>

<p>If a <code>$locationName</code> is given, <code>Feed::fetchData()</code> will be called implicitly
which will automatically retrieve weather data for the given location ID and
populate the data access objects accordingly.<br>
If you do not want this, you can omit <code>$locationName</code> or set it to <code>''</code> (an empty
string) and configure the location name yourself using <code>Feed::setLocationName()</code>.</p>

<p>The <code>$systemOfUnits</code> parameter can be used to determine the system of units to
be used by the weather feed. If not given or set to <code>''</code> (an empty string), it
defaults to using international units (Celsius, kilometers, millibars).</p>

<p><code>$feedUrl</code> defines the feed URL for retrieving weather data from the Yahoo!
Weather API. This parameter does not usually need to be changed unless Yahoo!
changes their API.</p>

<h4>
<a id="configuring-the-feed" class="anchor" href="#configuring-the-feed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuring the feed</h4>

<p>The following public methods for configuring the weather feed are available:</p>

<ul>
<li><p><code>setFeedUrl($feedUrl)</code><br>
Sets the feed URL for retrieving weather data from the Yahoo! Weather API.</p></li>
<li><p><code>getFeedUrl()</code><br>
Returns the last set weather API feed URL.</p></li>
<li><p><code>setLocationName($name)</code><br>
Sets the location name for retrieving weather data from Yahoo Weather API.</p></li>
<li><p><code>getLocationName()</code><br>
Returns the last set location name for retrieving weather data.</p></li>
<li><p><code>setSystemOfUnits($systemOfUnits)</code><br>
Sets the system of units to be returned by the feed.</p></li>
<li><p><code>getSystemOfUnits()</code><br>
Returns the last set system of units.</p></li>
</ul>

<h4>
<a id="retrieving-data-from-the-feed" class="anchor" href="#retrieving-data-from-the-feed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Retrieving data from the feed</h4>

<p>The following public methods for retrieving data from the feed are available:</p>

<ul>
<li><p><code>fetchData()</code><br>
Fetches weather data from the Yahoo Weather API and populates the data access
objects accordingly.<br>
This method must be called at least once before using any of the methods listed
below.</p></li>
<li><p><code>getLocation()</code><br>
Returns a <code>Data\Location</code> object holding the location of this forecast.</p></li>
<li><p><code>getUnits()</code><br>
Returns a <code>Data\Units</code> object holding units for various aspects of the forecast.</p></li>
<li><p><code>getWind()</code><br>
Returns a <code>Data\Wind</code> object holding forecast information about wind.</p></li>
<li><p><code>getAtmosphere()</code><br>
Returns a <code>Data\Atmosphere</code> object holding forecast information about current
atmospheric pressure, humidity, and visibility.</p></li>
<li><p><code>getAstronomy()</code><br>
Returns a <code>Data\Astronomy</code> object holding forecast information about current
astronomical conditions.</p></li>
<li><p><code>getCondition()</code><br>
Returns a <code>Data\Condition</code> object holding the current weather conditions.</p></li>
<li><p><code>getForecast()</code><br>
Returns an array of <code>Data\Forecast</code> objects holding the weather forecast for a
specific day.</p></li>
</ul>

<h3>
<a id="the-datalocation-object" class="anchor" href="#the-datalocation-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Location object</h3>

<p>The <code>Data\Location</code> object represents location information of the forecast.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getCity()</code><br>
Returns the city name. (string)</p></li>
<li><p><code>getRegion()</code><br>
Returns the state, territory, or region. (string)</p></li>
<li><p><code>getCountry()</code><br>
Returns the country name. (string)</p></li>
</ul>

<h3>
<a id="the-dataunits-object" class="anchor" href="#the-dataunits-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Units object</h3>

<p>The <code>Data\Units</code> object represents units for various aspects of the forecast.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getTemperature()</code><br>
Returns the degree units for temperature. (string)</p></li>
<li><p><code>getDistance()</code><br>
Returns the units for distance. (string)</p></li>
<li><p><code>getPressure()</code><br>
Returns the units of barometric pressure. (string)</p></li>
<li><p><code>getSpeed()</code><br>
Returns the units of speed. (string)</p></li>
</ul>

<h3>
<a id="the-datawind-object" class="anchor" href="#the-datawind-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Wind object</h3>

<p>The <code>Data\Wind</code> object represents forecast information about wind.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getChill()</code><br>
Returns the wind chill in degrees. (float)</p></li>
<li><p><code>getDirection()</code><br>
Returns the wind direction, in degrees. (float)</p></li>
<li><p><code>getSpeed()</code><br>
Returns the wind speed. (float)</p></li>
</ul>

<h3>
<a id="the-dataatmosphere-object" class="anchor" href="#the-dataatmosphere-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Atmosphere object</h3>

<p>The <code>Data\Atmosphere</code> object represents forecast information about current
atmospheric pressure, humidity, and visibility.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getHumidity()</code><br>
Returns the humidity in percent. (float)</p></li>
<li><p><code>getVisibility()</code><br>
Returns the visibility. (float)</p></li>
<li><p><code>getPressure()</code><br>
Returns the barometric pressure. (float)</p></li>
<li><p><code>getRising()</code><br>
Returns the state of the barometric pressure: steady (0), rising (1),
or falling (2). (int)  </p></li>
</ul>

<h3>
<a id="the-dataastronomy-object" class="anchor" href="#the-dataastronomy-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Astronomy object</h3>

<p>The <code>Data\Astronomy</code> object represents forecast information about current
astronomical conditions.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getSunrise()</code><br>
Returns today's sunrise time. (\DateTime)</p></li>
<li><p><code>getSunset()</code><br>
Returns today's sunset time. (\DateTime)</p></li>
</ul>

<h3>
<a id="the-datacondition-object" class="anchor" href="#the-datacondition-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Condition object</h3>

<p>The <code>Data\Condition</code> object represents the current weather conditions.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getText()</code><br>
Returns the textual description of conditions. (string)</p></li>
<li><p><code>getCode()</code><br>
Returns the condition code for this forecast. You could use this code to choose
a text description or image for the forecast.<br>
The possible values for this element are described in <a href="https://developer.yahoo.com/weather/documentation.html#codes">Condition Codes</a>. (int)</p></li>
<li><p><code>getTemperature()</code><br>
Returns the current temperature. (float)</p></li>
<li><p><code>getDate()</code><br>
Returns the current date and time for which this forecast applies. (\DateTime)</p></li>
</ul>

<h3>
<a id="the-dataforecast-object" class="anchor" href="#the-dataforecast-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Data\Forecast object</h3>

<p>The <code>Data\Forecast</code> object represents the weather forecast for a specific day.</p>

<p>The following public methods for retrieving data are available:</p>

<ul>
<li><p><code>getDate()</code><br>
Returns the date to which this forecast applies. (\DateTime)</p></li>
<li><p><code>getLow()</code><br>
Returns the forecasted low temperature for this day. (float)</p></li>
<li><p><code>getHigh()</code><br>
Returns the forecasted high temperature for this day. (float)</p></li>
<li><p><code>getText()</code><br>
Returns the textual description of conditions. (string)</p></li>
<li><p><code>getCode()</code><br>
Returns the condition code for this forecast. You could use this code to choose
a text description or image for the forecast.<br>
The possible values for this element are described in <a href="https://developer.yahoo.com/weather/documentation.html#codes">Condition Codes</a>. (int)</p></li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>See LICENSE.txt for full license details.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">randomhost/weather maintained by <a href="https://github.com/randomhost">randomhost</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>



  </body>
</html>
